window.GOVUK=window.GOVUK||{},window.GOVUK.analyticsGa4=window.GOVUK.analyticsGa4||{},function(){"use strict";var t={load:function(){var t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.async=!0,window.dataLayer=window.dataLayer||[],window.dataLayer.push({"gtm.blocklist":["customPixels","customScripts","html","nonGoogleScripts"]}),window.dataLayer.push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var n=window.GOVUK.analyticsGa4.vars.auth||"",i=window.GOVUK.analyticsGa4.vars.preview||"";n&&(n="&gtm_auth="+n),i&&(i="&gtm_preview="+i+"&gtm_cookies_win=x"),this.googleSrc="https://www.googletagmanager.com/gtm.js?id="+window.GOVUK.analyticsGa4.vars.id+n+i,e.src=this.googleSrc,t.parentNode.insertBefore(e,t)},getUserAgent:function(){return navigator.userAgent},getTimestamp:function(){return Date.now().toString()},sendData:function(t){return!window.GOVUK.stopSendingAnalytics&&(t.govuk_gem_version=this.getGemVersion(),t.timestamp=this.getTimestamp(),window.GOVUK.analyticsGa4.showDebug&&(t.event_data?t.event_data=this.sortEventData(t.event_data):t.page_view?t.page_view=this.sortEventData(t.page_view):t.search_results&&(t.search_results=this.sortEventData(t.search_results)),console.info(JSON.stringify(t,null," "))),this.trackFunctions.getSearch().match(/[?&](disable_ga4|smokey_cachebust){1}/)?(window.fakeDataLayer=window.fakeDataLayer||[],void window.fakeDataLayer.push(t)):void window.dataLayer.push(t))},applySchemaAndSendData:function(t,e){var n=(new window.GOVUK.analyticsGa4.Schemas).mergeProperties(t,e);this.sendData(n)},getGemVersion:function(){return window.GOVUK.analyticsGa4.vars.gem_version||"not found"},sortEventData:function(t){if(!Object.keys)return t;var e=Object.keys(t);e.sort();for(var n={},i=0;i<e.length;i++)n[e[i]]=t[e[i]];return n},trackFunctions:{getDomainRegex:function(){return/^(http:||https:)?(\/\/)([^\/]*)/},getSearch:function(){return window.location.search},findTrackingAttributes:function(t,e){return t.hasAttribute("["+e+"]")?t:t.closest("["+e+"]")},hrefIsRelative:function(t){return!this.getDomainRegex().exec(t)},isMailToLink:function(t){return"mailto:"===t.substring(0,7)},getClickType:function(t){switch(t.type){case"click":return t.ctrlKey?"ctrl click":t.metaKey?"command/win click":t.shiftKey?"shift click":t.altKey?"alt/option click":"primary click";case"mousedown":return"middle click";case"contextmenu":return"secondary click"}},isInternalLink:function(t){var e=window.GOVUK.analyticsGa4.vars.internalDomains;if(this.hrefIsRelative(t))return!0;for(var n=!1,i=0;i<e.length;i++){var a=e[i];this.hrefPointsToDomain(t,a)&&(n=!0)}return n},isExternalLink:function(t){return!this.isInternalLink(t)},hrefPointsToDomain:function(t,e){return"/"!==e.substring(e.length)&&(e+="/"),"/"!==t.substring(t.length)&&(t+="/"),new RegExp("^((http)*(s)*(:)*//)("+e+")","g").test(t)},removeLinesAndExtraSpaces:function(t){return t=(t=(t=t.trim()).replace(/(\r\n|\n|\r)/gm," ")).replace(/\s+/g," ")},removeCrossDomainParams:function(t){return-1===t.indexOf("_ga")&&-1===t.indexOf("_gl")||(t=(t=(t=t.replace(/_g[al]=([^&]*)/g,"")).replace(/(&&)+/g,"&")).replace("?&","?"),(this.stringEndsWith(t,"?")||this.stringEndsWith(t,"&"))&&(t=t.substring(0,t.length-1))),t},stringStartsWith:function(t,e){return t.substring(0,e.length)===e},stringEndsWith:function(t,e){return t.substring(t.length-e.length,t.length)===e},populateLinkDomain:function(t){if(!this.isMailToLink(t)){if(this.hrefIsRelative(t))return this.getProtocol()+"//"+this.getHostname();var e=this.getDomainRegex().exec(t);return e?e[0]:void 0}},getPathname:function(){return window.location.pathname},getProtocol:function(){return window.location.protocol},getHostname:function(){return window.location.hostname},appendDomainsWithoutWWW:function(t){for(var e=0;e<t.length;e++){var n=t[e];if(this.stringStartsWith(n,"www.")){var i=n.replace("www.","");t.push(i)}}},setIndexes:function(t){for(var e=t.querySelectorAll("a"),n=0,i=0;i<e.length;i++){var a=e[i];a.getAttribute("href")&&!a.getAttribute("data-ga4-ecommerce-path")&&null===a.getAttribute("data-ga4-do-not-index")&&(n++,a.setAttribute("data-ga4-index",'{"index_link": '+n+"}"))}try{var r=JSON.parse(t.getAttribute("data-ga4-link"));r.index_total=r.index_total||n,t.setAttribute("data-ga4-link",JSON.stringify(r))}catch(t){console.error("Unable to JSON.parse or JSON.stringify index: ",t,window.location)}},applyRedactionIfRequired:function(t,e,n){return e.closest("[data-ga4-do-not-redact]")?n:t.stripPIIWithOverride(n,!0,!0)},appendPathToAnchorLinks:function(t){return this.stringStartsWith(t,"#")&&"/"!==this.getPathname()?this.getPathname()+t:t},standardiseSearchTerm:function(t){if(t){var e=new window.GOVUK.analyticsGa4.PIIRemover;return t=t.replace(/\++|(%2B)+/gm," "),t=window.GOVUK.analyticsGa4.core.trackFunctions.removeLinesAndExtraSpaces(t),t=(t=e.stripPIIWithOverride(t,!1,!0)).toLowerCase()}}},ecommerceHelperFunctions:{clearEcommerceObject:function(){window.GOVUK.analyticsGa4.core.sendData({search_results:{ecommerce:null}})},getIndex:function(t,e){var n=t.getAttribute("data-ga4-ecommerce-index");return n?parseInt(n)+e-1:null},getResultCount:function(t,e){var n=t.querySelector("#"+e);return n?(n=n.textContent.replace(/[^0-9]+/g,""),parseInt(n)):null},populateEcommerceSchema:function(t){var e=t.element,n=t.resultsId,i=void 0!==t.event,a=null!==e.getAttribute("data-ga4-search-query"),r=(new window.GOVUK.analyticsGa4.Schemas).ecommerceSchema(),o="Smart answer results";if(a){var s=window.GOVUK.analyticsGa4.core.trackFunctions.standardiseSearchTerm(e.getAttribute("data-ga4-search-query"));s&&(s=s.substring(0,500));var c=e.getAttribute("data-ga4-ecommerce-variant");o="Site search results"}var d=e.querySelectorAll("[data-ga4-ecommerce-path]"),l=e.getAttribute("data-ga4-list-title")||o,u=parseInt(e.getAttribute("data-ga4-ecommerce-start-index"),10);if(r.event="search_results",r.search_results.event_name=i?"select_item":"view_item_list",r.search_results.results=window.GOVUK.analyticsGa4.core.ecommerceHelperFunctions.getResultCount(e,n),r.search_results.term=s||void 0,r.search_results.sort=c||void 0,i){var h=t.event.target;r.search_results.ecommerce.items.push({item_id:h.getAttribute("data-ga4-ecommerce-path"),item_content_id:h.getAttribute("data-ga4-ecommerce-content-id")||void 0,item_name:h.textContent,item_list_name:l,index:window.GOVUK.analyticsGa4.core.ecommerceHelperFunctions.getIndex(h,u)}),r.event_data={external:window.GOVUK.analyticsGa4.core.trackFunctions.isExternalLink(h.getAttribute("data-ga4-ecommerce-path"))?"true":"false"}}else for(var g=0;g<d.length;g++){var w=d[g],m=w.getAttribute("data-ga4-ecommerce-path");w.getAttribute("data-ga4-ecommerce-index")||w.setAttribute("data-ga4-ecommerce-index",g+1);var p={item_id:m,item_content_id:w.getAttribute("data-ga4-ecommerce-content-id")||void 0,item_list_name:l,index:window.GOVUK.analyticsGa4.core.ecommerceHelperFunctions.getIndex(w,u)};if(this.getArraySize(r.search_results.ecommerce.items)+this.getArraySize(p)>=15e3)break;r.search_results.ecommerce.items.push(p)}return r},getArraySize:function(t){return JSON.stringify(t).length}}};window.GOVUK.analyticsGa4.core=t}(),function(t){"use strict";var e=t.GOVUK||{},n=function(){this.undefined=void 0};n.prototype.eventSchema=function(){return{event:this.undefined,event_data:{event_name:this.undefined,type:this.undefined,url:this.undefined,text:this.undefined,index:{index_link:this.undefined,index_section:this.undefined,index_section_count:this.undefined},index_total:this.undefined,section:this.undefined,action:this.undefined,external:this.undefined,method:this.undefined,link_domain:this.undefined,tool_name:this.undefined,percent_scrolled:this.undefined,video_current_time:this.undefined,length:this.undefined,video_percent:this.undefined,autocomplete_input:this.undefined,autocomplete_suggestions:this.undefined}}},n.prototype.ecommerceSchema=function(){return{event:this.undefined,search_results:{event_name:this.undefined,term:this.undefined,sort:this.undefined,results:this.undefined,ecommerce:{items:[]}},event_data:this.undefined}},n.prototype.mergeProperties=function(t,e){var n=this.eventSchema();for(var i in n.event=e,t)void 0!==t[i]&&(n.event_data=this.addToObject(n.event_data,i,t[i]));return n},n.prototype.isAnObject=function(t){if("object"==typeof t&&!Array.isArray(t)&&null!==t)return!0},n.prototype.addToObject=function(t,e,n){if(e in t)return t[e]=n+"",t;for(var i in t)if(this.isAnObject(t[i])&&e in t[i])return t[i][e]=n+"",t;return t},e.analyticsGa4=e.analyticsGa4||{},e.analyticsGa4.Schemas=n,t.GOVUK=e}(window),function(t){"use strict";function e(){return document.querySelectorAll('meta[name="govuk:ga4-strip-dates"]').length>0}function n(){return document.querySelectorAll('meta[name="govuk:ga4-strip-postcodes"]').length>0}function i(){var t=document.querySelector('meta[name="govuk:ga4-strip-query-string-parameters"]'),e=!1;t&&(e=t.getAttribute("content"));var n=[];if(e)for(var i=e.split(","),a=0;a<i.length;a++)n.push(i[a].trim());return n}var a=t.GOVUK||{},r=/[^\s=/?&#+]+(?:@|%40)[^\s=/?&+]+/g,o=/\b[A-PR-UWYZ][A-HJ-Z]?[0-9][0-9A-HJKMNPR-Y]?(?:[\s+]|%20)*[0-9](?!refund)[ABD-HJLNPQ-Z]{2,3}\b/gi,s=/\d{1,2}([-\/\\])\d{1,2}([-\/\\])\d{4}/g,c=/\d{4}([-\/\\])\d{1,2}([-\/\\])\d{1,2}/g,d=/[0-9]{8}/g,l=/\d{1,2}(?:st|nd|rd|th)?\s(?:of\s)?(Jan(?:uary)?|Feb(?:ruary)?|Mar(?:ch)?|Apr(?:il)?|May|Jun(?:e)?|Jul(?:y)?|Aug(?:ust)?|Sep(?:t)?(?:ember)?|Oct(?:ober)?|Nov(?:ember)?|Dec(?:ember)?)\s(?:')?(\d{4}|\d{2})/gi,u=/(Jan(?:uary)?|Feb(?:ruary)?|Mar(?:ch)?|Apr(?:il)?|May|Jun(?:e)?|Jul(?:y)?|Aug(?:ust)?|Sep(?:t)?(?:ember)?|Oct(?:ober)?|Nov(?:ember)?|Dec(?:ember)?)\s\d{1,2}?(?:st|nd|rd|th)?\s(?:')?(\d{4}|\d{2})/gi,h=/[|\\{}()[\]^$+*?.]/g,g=/reset_password_token=[a-zA-Z0-9-]+/g,w=/unlock_token=[a-zA-Z0-9-]+/g,m=/state=.[^&]+/g,p=/GWF\d{9}/g,v=/GB\d{12}/g,y=function(){this.stripDatePII=e(),this.stripPostcodePII=n(),this.queryStringParametersToStrip=i()};y.prototype.PIISafe=function(t){this.value=t},y.prototype.stripPII=function(t){return"string"==typeof t?this.stripPIIFromString(t):"[object Array]"===Object.prototype.toString.call(t)||"[object Arguments]"===Object.prototype.toString.call(t)?this.stripPIIFromArray(t):"object"==typeof t?this.stripPIIFromObject(t):t},y.prototype.stripPIIWithOverride=function(t,e,n){var i=this.stripDatePII,a=this.stripPostcodePII;this.stripDatePII=e,this.stripPostcodePII=n;var r=this.stripPII(t);return this.stripDatePII=i,this.stripPostcodePII=a,r},y.prototype.stripPIIFromString=function(t){var e=t.replace(r,"[email]");if(e=(e=(e=(e=(e=e.replace(g,"reset_password_token=[reset_password_token]")).replace(w,"unlock_token=[unlock_token]")).replace(m,"state=[state]")).replace(p,"[gwf number]")).replace(v,"[gb eori number]"),e=this.stripQueryStringParameters(e),!0===this.stripDatePII){var n="[date]";e=(e=(e=(e=(e=e.replace(s,n)).replace(c,n)).replace(d,n)).replace(l,n)).replace(u,n)}return!0===this.stripPostcodePII&&(e=e.replace(o,"[postcode]")),e},y.prototype.stripPIIFromObject=function(t){if(t){if(t instanceof this.PIISafe)return t.value;for(var e in t){var n=t[e];t[e]=this.stripPII(n)}return t}},y.prototype.stripPIIFromArray=function(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];t[e]=this.stripPII(i)}return t},y.prototype.stripQueryStringParameters=function(t){for(var e=0;e<this.queryStringParametersToStrip.length;e++){var n=this.queryStringParametersToStrip[e],i=n.replace(h,"\\$&"),a=new RegExp("((?:\\?|&)"+i+"=)(?:[^&#\\s]*)","g");t=t.replace(a,"$1["+n+"]")}return t},a.analyticsGa4=a.analyticsGa4||{},a.analyticsGa4.PIIRemover=y,t.GOVUK=a}(window),window.GOVUK=window.GOVUK||{},window.GOVUK.analyticsGa4=window.GOVUK.analyticsGa4||{},window.GOVUK.analyticsGa4.analyticsModules=window.GOVUK.analyticsGa4.analyticsModules||{},function(t){"use strict";var e={PIIRemover:new window.GOVUK.analyticsGa4.PIIRemover,nullValue:void 0,init:function(t){if(window.dataLayer){this.stripDates=!this.getSearchTerm();var e={event:"page_view",page_view:{location:this.getLocation(),referrer:this.getReferrer(t),title:this.getTitle(),status_code:this.getStatusCode(),viewport_size:this.getViewPort(),ab_test:this.getMetaContent("ab-test"),document_type:this.getMetaContent("format"),publishing_app:this.getMetaContent("publishing-app"),rendering_app:this.getMetaContent("rendering-app"),schema_name:this.getMetaContent("schema-name"),content_id:this.getMetaContent("content-id"),browse_topic:this.getMetaContent("ga4-browse-topic"),navigation_page_type:this.getMetaContent("navigation-page-type"),navigation_list_type:this.getMetaContent("navigation-list-type"),step_navs:this.getMetaContent("stepnavs"),taxonomy_level1:this.getMetaContent("taxonomy_level1")||this.getMetaContent("themes"),taxonomy_main:this.getMetaContent("taxon-slug"),taxonomy_main_id:this.getMetaContent("taxon-id"),taxonomy_all:this.getMetaContent("taxon-slugs"),taxonomy_all_ids:this.getMetaContent("taxon-ids"),language:this.getLanguage(),history:this.getHistory(),withdrawn:this.getWithDrawn(),first_published_at:this.stripTimeFrom(this.getMetaContent("first-published-at")),updated_at:this.stripTimeFrom(this.getMetaContent("updated-at")),public_updated_at:this.stripTimeFrom(this.getMetaContent("public-updated-at")),publishing_government:this.removeHyphensAndDowncase(this.getMetaContent("publishing-government")||this.getMetaContent("ga4-publishing-government")),political_status:this.getMetaContent("political-status")||this.getMetaContent("ga4-political-status"),primary_publishing_organisation:this.getMetaContent("primary-publishing-organisation"),organisations:this.getMetaContent("organisations")||this.getMetaContent("analytics:organisations"),world_locations:this.getMetaContent("world-locations")||this.getMetaContent("analytics:world-locations"),dynamic:t?"true":"false",emergency_banner:document.querySelector("[data-ga4-emergency-banner]")?"true":void 0,phase_banner:this.getElementAttribute("data-ga4-phase-banner")||void 0,devolved_nations_banner:this.getElementAttribute("data-ga4-devolved-nations-banner")||void 0,cookie_banner:this.getBannerPresence("[data-ga4-cookie-banner]"),intervention:this.getBannerPresence("[data-ga4-intervention-banner]"),global_bar:this.getBannerPresence("[data-ga4-global-banner]"),query_string:this.getQueryString(),search_term:this.getSearchTerm(),tool_name:this.getToolName(),spelling_suggestion:this.getMetaContent("spelling-suggestion"),discovery_engine_attribution_token:this.getMetaContent("discovery-engine-attribution-token"),canonical_url:this.getCanonicalHref()}};window.GOVUK.analyticsGa4.core.sendData(e)}},removeHyphensAndDowncase:function(t){if(t)return t.replace(/-/g," ").toLowerCase()},getCanonicalHref:function(){var t=document.querySelector("link[rel=canonical]");if(t)return t.href},getLocation:function(){return this.PIIRemover.stripPIIWithOverride(this.stripGaParam(document.location.href),this.stripDates,!0)},getSearchTerm:function(){var t=this.getElementAttribute("data-ga4-search-query");if(!t){if(!(t=window.GOVUK.analyticsGa4.core.trackFunctions.getSearch().match(/keywords=([^&]*)/)))return;t=t[0].replace("keywords=",""),t=decodeURIComponent(t).replace(/'&quot;'/g,'"')}return t=window.GOVUK.analyticsGa4.core.trackFunctions.standardiseSearchTerm(t)},getToolName:function(){if(window.sessionStorage.getItem("searchAutocompleteAccepted"))return window.sessionStorage.removeItem("searchAutocompleteAccepted"),"autocomplete"},getQueryString:function(){var t=window.GOVUK.analyticsGa4.core.trackFunctions.getSearch();if(t)return t=this.stripGaParam(t),t=(t=this.PIIRemover.stripPIIWithOverride(t,this.stripDates,!0)).substring(1)},getReferrer:function(t){return t=this.stripGaParam(t||document.referrer),this.PIIRemover.stripPIIWithOverride(t,!0,!0)},stripGaParam:function(t){return t=(t=t.replace(/(_ga=[0-9.-]+)/g,"_ga=[id]")).replace(/(_gl=[a-zA-Z0-9._\-*]+)/g,"_gl=[id]")},getTitle:function(){return this.PIIRemover.stripPIIWithOverride(document.title,!0,!0)},getStatusCode:function(){return window.httpStatusCode?window.httpStatusCode.toString():"200"},getViewPort:function(){return Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)+"x"+Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)},getMetaContent:function(t){var e=document.querySelector('meta[name="govuk:'+t+'"]');if(e){var n=e.getAttribute("content");if(""===n)return;return n}return this.nullValue},getElementAttribute:function(t){var e=document.querySelector("["+t+"]");if(e)return e.getAttribute(t)},getLanguage:function(){var t=document.getElementById("content"),e=document.querySelector("html");if(t){var n=t.getAttribute("lang");if(n)return n}return e.getAttribute("lang")||this.nullValue},getHistory:function(){return"true"===this.getMetaContent("content-has-history")?"true":"false"},getWithDrawn:function(){return"withdrawn"===this.getMetaContent("withdrawn")?"true":"false"},getBannerPresence:function(t){var e=document.querySelector(t);if(e){if(window.GOVUK.modules.start(e),""===e.getAttribute("hidden")||e.getAttribute("hidden"))return;return"true"}},stripTimeFrom:function(t){return void 0!==t?t.split("T")[0]:this.nullValue}};t.PageViewTracker=e}(window.GOVUK.analyticsGa4.analyticsModules),window.GOVUK=window.GOVUK||{},window.GOVUK.analyticsGa4=window.GOVUK.analyticsGa4||{},window.GOVUK.analyticsGa4.analyticsModules=window.GOVUK.analyticsGa4.analyticsModules||{},function(){"use strict";var t={init:function(){window.addEventListener("beforeprint",(function(){var t={event_name:"print_page",type:"print page",method:"browser print"};window.GOVUK.analyticsGa4.core.applySchemaAndSendData(t,"event_data")}))}};window.GOVUK.analyticsGa4.analyticsModules.Ga4PrintIntentTracker=t}(),window.GOVUK=window.GOVUK||{},window.GOVUK.analyticsGa4=window.GOVUK.analyticsGa4||{},window.GOVUK.analyticsGa4.analyticsModules=window.GOVUK.analyticsGa4.analyticsModules||{},function(){"use strict";var t={init:function(){window.addEventListener("copy",this.trackCopy.bind(this))},trackCopy:function(t){try{var e=this.getSelectedText();if(!e)return;var n=t.target.tagName;if("INPUT"===n||"TEXTAREA"===n)return;var i=new window.GOVUK.analyticsGa4.PIIRemover;e=window.GOVUK.analyticsGa4.core.trackFunctions.removeLinesAndExtraSpaces(e);var a=(e=i.stripPIIWithOverride(e,!0,!0)).length,r={event_name:"copy",type:"copy",action:"copy",method:"browser copy",text:e=e.substring(0,30),length:a};window.GOVUK.analyticsGa4.core.applySchemaAndSendData(r,"event_data")}catch(t){console.warn("GA4 copy tracker error: "+t.message,window.location)}},getSelectedText:function(){return window.getSelection?window.getSelection().toString():!!document.selection&&document.selection.createRange().text}};window.GOVUK.analyticsGa4.analyticsModules.Ga4CopyTracker=t}(),window.GOVUK=window.GOVUK||{},window.GOVUK.analyticsGa4=window.GOVUK.analyticsGa4||{},window.GOVUK.analyticsGa4.analyticsModules=window.GOVUK.analyticsGa4.analyticsModules||{},function(){"use strict";var t={init:function(t){window.dataLayer&&(t=t||{},this.internalDownloadPaths=t.internalDownloadPaths||["/government/uploads/","/media/"],this.dedicatedDownloadDomains=t.dedicatedDownloadDomains||["assets.publishing.service.gov.uk"],window.GOVUK.analyticsGa4.core.trackFunctions.appendDomainsWithoutWWW(this.dedicatedDownloadDomains),this.handleClick=this.handleClick.bind(this),this.handleMousedown=this.handleMousedown.bind(this),this.PIIRemover=new window.GOVUK.analyticsGa4.PIIRemover,document.querySelector("body").addEventListener("click",this.handleClick),document.querySelector("body").addEventListener("contextmenu",this.handleClick),document.querySelector("body").addEventListener("mousedown",this.handleMousedown))},stopTracking:function(){document.querySelector("body").removeEventListener("click",this.handleClick),document.querySelector("body").removeEventListener("contextmenu",this.handleClick),document.querySelector("body").removeEventListener("mousedown",this.handleMousedown)},handleClick:function(t){var e=t.target;if("A"!==e.tagName&&(e=e.closest("a")),e&&!e.closest("[data-ga4-ecommerce-path]")){var n=e.closest("[data-ga4-link]");if(n){var i=n.getAttribute("data-ga4-limit-to-element-class");if(!i)return;for(var a=i.split(","),r=0;r<a.length;r++)if(e.closest("."+a[r].trim()))return}var o=e.getAttribute("href");if(o){var s={},c=e.getAttribute("data-ga4-attributes");if(c)try{for(var d in c=JSON.parse(c))s[d]=c[d]}catch(t){console.error("GA4 configuration error: "+t.message,window.location)}var l=!1;window.GOVUK.analyticsGa4.core.trackFunctions.isMailToLink(o)?(s.event_name="navigation",s.type="email",s.external="true",l=!0):this.isDownloadLink(o)?(s.event_name="file_download",s.type=this.isPreviewLink(o)?"preview":"generic download",s.external=window.GOVUK.analyticsGa4.core.trackFunctions.isExternalLink(o)?"true":"false"):window.GOVUK.analyticsGa4.core.trackFunctions.isExternalLink(o)&&(s.event_name="navigation",s.type=s.type||"generic link",s.external="true"),Object.keys(s).length>0&&(s.url=l?o:this.PIIRemover.stripPIIWithOverride(o,!0,!0),s.url&&(s.url=window.GOVUK.analyticsGa4.core.trackFunctions.removeCrossDomainParams(s.url),s.link_domain=window.GOVUK.analyticsGa4.core.trackFunctions.populateLinkDomain(s.url)),s.text=window.GOVUK.analyticsGa4.core.trackFunctions.removeLinesAndExtraSpaces(e.textContent),s.text=l?s.text:this.PIIRemover.stripPIIWithOverride(s.text,!0,!0),s.text||!e.querySelector("img")&&!e.querySelector("svg")||(s.text="image"),s.method=window.GOVUK.analyticsGa4.core.trackFunctions.getClickType(t),window.GOVUK.analyticsGa4.core.applySchemaAndSendData(s,"event_data"))}}},handleMousedown:function(t){1===t.button&&this.handleClick(t)},isDownloadLink:function(t){if(window.GOVUK.analyticsGa4.core.trackFunctions.isInternalLink(t)&&this.hrefPointsToDownloadPath(t))return!0;for(var e=!1,n=0;n<this.dedicatedDownloadDomains.length;n++){var i=this.dedicatedDownloadDomains[n];window.GOVUK.analyticsGa4.core.trackFunctions.hrefPointsToDomain(t,i)&&(e=!0)}return e},isPreviewLink:function(t){return/\.\w+\/preview/i.test(t)},hrefPointsToDownloadPath:function(t){for(var e=!1,n=0;n<this.internalDownloadPaths.length;n++){var i=this.internalDownloadPaths[n];-1!==t.indexOf(i)&&(e=!0)}return e}};window.GOVUK.analyticsGa4.analyticsModules.Ga4SpecialistLinkTracker=t}(),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){"use strict";function e(t){this.module=t,this.trackingTrigger="data-ga4-link",this.trackLinksOnly=this.module.hasAttribute("data-ga4-track-links-only"),this.limitToElementClass=this.module.getAttribute("data-ga4-limit-to-element-class"),this.PIIRemover=new window.GOVUK.analyticsGa4.PIIRemover}e.prototype.init=function(){var t=window.GOVUK.getConsentCookie();t&&t.usage?this.startModule():(this.start=this.startModule.bind(this),window.addEventListener("cookie-consent",this.start))},e.prototype.startModule=function(){window.dataLayer&&(window.removeEventListener("cookie-consent",this.start),this.handleClick=this.handleClick.bind(this),this.handleMousedown=this.handleMousedown.bind(this),this.module.addEventListener("click",this.handleClick),this.module.addEventListener("contextmenu",this.handleClick),this.module.addEventListener("mousedown",this.handleMousedown),this.module.hasAttribute("data-ga4-set-indexes")&&window.GOVUK.analyticsGa4.core.trackFunctions.setIndexes(this.module))},e.prototype.handleClick=function(t){var e=t.target;if(this.trackLinksOnly){if(this.trackLinksOnly&&e.closest("a"))if(this.limitToElementClass){for(var n=this.limitToElementClass.split(","),i=0;i<n.length;i++)if(e.closest("."+n[i].trim())){if(e.closest("[data-ga4-link]")!==e.closest("[data-ga4-limit-to-element-class]"))return;this.trackClick(t)}}else this.trackClick(t)}else this.trackClick(t)},e.prototype.handleMousedown=function(t){1===t.button&&this.handleClick(t)},e.prototype.trackClick=function(t){var e=t.target,n=window.GOVUK.analyticsGa4.core.trackFunctions;if(!e.closest("[data-ga4-ecommerce-path]")){var i=n.findTrackingAttributes(t.target,this.trackingTrigger);if(i){try{var a=i.getAttribute(this.trackingTrigger);a=JSON.parse(a)}catch(t){return void console.error("GA4 configuration error: "+t.message,window.location)}var r=a.text||t.target.textContent;a.text=n.removeLinesAndExtraSpaces(r),a.text=n.applyRedactionIfRequired(this.PIIRemover,e,a.text),!a.text&&(e.querySelector("img")||e.querySelector("svg")||"IMG"===e.tagName||e.closest("svg"))&&(a.text="image");try{var o=a.url||this.findLink(t.target).getAttribute("href")}catch(t){return}if(a.url=n.removeCrossDomainParams(o),a.url=n.applyRedactionIfRequired(this.PIIRemover,e,a.url),a.url=n.appendPathToAnchorLinks(a.url),a.link_domain=n.populateLinkDomain(a.url),a.method=n.getClickType(t),a.external=n.isExternalLink(a.url)?"true":"false",a.index=this.setIndex(a.index,t.target),a.index){for(var s in a.index)a[s]=a.index[s];delete a.index}"smart answer"===a.type&&"change response"===a.action&&(a.section=this.PIIRemover.stripPIIWithOverride(a.section,!0,!0)),window.GOVUK.analyticsGa4.core.applySchemaAndSendData(a,"event_data")}}},e.prototype.findLink=function(t){return"A"===t.tagName?t:t.closest("a")},e.prototype.setIndex=function(t,e){if(e.getAttribute("data-ga4-index"))try{var n=JSON.parse(e.getAttribute("data-ga4-index"));t=t?window.GOVUK.extendObject(t,n):n}catch(t){return void console.error("Unable to parse index as JSON: "+t.message,window.location)}return t},t.Ga4LinkTracker=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){"use strict";function e(t){this.module=t,this.trackingTrigger="data-ga4-event"}e.prototype.init=function(){var t=window.GOVUK.getConsentCookie();t&&t.usage?this.startModule():(this.start=this.startModule.bind(this),window.addEventListener("cookie-consent",this.start))},e.prototype.startModule=function(){window.dataLayer&&(window.removeEventListener("cookie-consent",this.start),this.module.addEventListener("click",this.trackClick.bind(this),!0))},e.prototype.trackClick=function(t){if(!t.tracked){var e=window.GOVUK.analyticsGa4.core.trackFunctions.findTrackingAttributes(t.target,this.trackingTrigger);if(e){try{var n=e.getAttribute(this.trackingTrigger);n=JSON.parse(n)}catch(t){return void console.error("GA4 configuration error: "+t.message,window.location)}var i=n.text||t.target.textContent;if(n.text=window.GOVUK.analyticsGa4.core.trackFunctions.removeLinesAndExtraSpaces(i),e.closest("[data-ga4-expandable]"))var a=this.getClosestAttribute(e,"aria-expanded");var r=e.closest("details");if(a)n.text=n.text||e.innerText,n.action="false"===a?"opened":"closed";else if(r){n.text=n.text||r.textContent;var o=r.getAttribute("open");n.action=null==o?"opened":"closed"}if(t.target.closest(".gem-c-tabs")){var s=t.target.closest("a");if(s){var c=s.getAttribute("href");c&&(n.url=window.GOVUK.analyticsGa4.core.trackFunctions.appendPathToAnchorLinks(c))}}window.GOVUK.analyticsGa4.core.applySchemaAndSendData(n,"event_data"),t.tracked=!0}}},e.prototype.getClosestAttribute=function(t,e){var n=t.getAttribute(e),i=t.querySelector("["+e+"]");return n||""===n?n:i?i.getAttribute(e):void 0},t.Ga4EventTracker=e}(window.GOVUK.Modules),function(t){"use strict";var e=t.GOVUK||{};e.analyticsGa4=e.analyticsGa4||{},e.analyticsGa4.Ga4EcommerceTracker={init:function(t){if(window.dataLayer){var e=!t;if(this.searchResultsBlocks=document.querySelectorAll("[data-ga4-ecommerce]"),0===!this.searchResultsBlocks.length)return;if(t){var n=window.GOVUK.analyticsGa4.analyticsModules.PageViewTracker;n&&n.init(t)}for(var i=0;i<this.searchResultsBlocks.length;i++)this.trackResults(this.searchResultsBlocks[i]),e&&this.searchResultsBlocks[i].addEventListener("click",this.handleClick.bind(this))}},trackResults:function(t){var n=e.analyticsGa4.core.ecommerceHelperFunctions.populateEcommerceSchema({element:t,resultsId:"js-result-count"});e.analyticsGa4.core.ecommerceHelperFunctions.clearEcommerceObject(),e.analyticsGa4.core.sendData(n)},handleClick:function(t){if(t.target.getAttribute("data-ga4-ecommerce-path")){var n=t.target.closest("[data-ga4-ecommerce]"),i=e.analyticsGa4.core.ecommerceHelperFunctions.populateEcommerceSchema({element:n,resultsId:"js-result-count",event:t});e.analyticsGa4.core.ecommerceHelperFunctions.clearEcommerceObject(),e.analyticsGa4.core.sendData(i)}}},t.GOVUK=e}(window),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){"use strict";function e(t){this.module=t,this.trackingTrigger="data-ga4-form",this.includeTextInputValues=this.module.hasAttribute("data-ga4-form-include-text"),this.redacted=!1,this.useFallbackValue=this.module.hasAttribute("data-ga4-form-no-answer-undefined")?void 0:"No answer given"}e.prototype.init=function(){var t=window.GOVUK.getConsentCookie();t&&t.usage?this.startModule():(this.start=this.startModule.bind(this),window.addEventListener("cookie-consent",this.start))},e.prototype.startModule=function(){window.dataLayer&&(window.removeEventListener("cookie-consent",this.start),this.module.addEventListener("submit",this.trackFormSubmit.bind(this)))},e.prototype.trackFormSubmit=function(t){var e=window.GOVUK.analyticsGa4.core.trackFunctions.findTrackingAttributes(t.target,this.trackingTrigger);if(e){try{var n=e.getAttribute(this.trackingTrigger);n=JSON.parse(n)}catch(t){return void console.warn("GA4 configuration error: "+t.message,window.location)}var i=this.getFormInputs(),a=this.getInputValues(i);n.text=n.text||this.combineGivenAnswers(a)||this.useFallbackValue,"search"===n.action&&n.text&&(n.text=window.GOVUK.analyticsGa4.core.trackFunctions.standardiseSearchTerm(n.text)),window.GOVUK.analyticsGa4.core.applySchemaAndSendData(n,"event_data")}},e.prototype.getFormInputs=function(){for(var t=[],e=this.module.querySelectorAll("label"),n=0;n<e.length;n++){var i=e[n],a=i.getAttribute("for"),r=!1;r=a?this.module.querySelector("[id="+a+"]"):i.querySelector("input"),t.push({input:r,label:i})}return t},e.prototype.getInputValues=function(t){for(var e=t.length-1;e>=0;e--){var n=t[e],i=n.input,a=n.label.innerText||n.label.textContent,r=i.getAttribute("type"),o=i.nodeName,s=["text","search","email","number"];if("checkbox"===r&&i.checked)n.answer=a;else if("SELECT"===o&&i.options[i.selectedIndex].value)n.answer=i.options[i.selectedIndex].text;else if(-1!==s.indexOf(r)&&i.value)if(this.includeTextInputValues||i.hasAttribute("data-ga4-form-include-input")){var c=new window.GOVUK.analyticsGa4.PIIRemover;n.answer=c.stripPIIWithOverride(i.value,!0,!0)}else this.redacted=!0;else"radio"===r&&i.checked?n.answer=a:t.splice(e,1)}return t},e.prototype.combineGivenAnswers=function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n].answer;i&&e.push(i)}return this.redacted&&e.push("[REDACTED]"),e=e.join(",")},t.Ga4FormTracker=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){"use strict";function e(t){this.module=t,this.trackingTrigger="data-ga4-auto",this.PIIRemover=new window.GOVUK.analyticsGa4.PIIRemover}e.prototype.init=function(){var t=window.GOVUK.getConsentCookie();t&&t.usage?this.startModule():(this.start=this.startModule.bind(this),window.addEventListener("cookie-consent",this.start))},e.prototype.startModule=function(){this.sendEvent()},e.prototype.sendEvent=function(){if(window.dataLayer){window.removeEventListener("cookie-consent",this.start);try{var t=this.module.getAttribute(this.trackingTrigger);t=JSON.parse(t)||{}}catch(t){return void console.error("GA4 configuration error: "+t.message,window.location)}t.text=this.PIIRemover.stripPIIWithOverride(t.text,!0,!0),window.GOVUK.analyticsGa4.core.applySchemaAndSendData(t,"event_data")}},t.Ga4AutoTracker=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},window.GOVUK.analyticsGa4=window.GOVUK.analyticsGa4||{},function(t){"use strict";function e(t){this.module=t}e.prototype.init=function(){var t=window.GOVUK.getConsentCookie();t&&t.usage?this.startModule():(this.start=this.startModule.bind(this),window.addEventListener("cookie-consent",this.start))},e.prototype.startModule=function(){window.dataLayer&&this.module.querySelector("[data-ga4-ecommerce-path]")&&(window.removeEventListener("cookie-consent",this.start),this.trackResults(),this.module.addEventListener("click",this.handleClick.bind(this)))},e.prototype.trackResults=function(){var t=window.GOVUK.analyticsGa4.core.ecommerceHelperFunctions.populateEcommerceSchema({element:this.module,resultsId:"ga4-ecommerce-result-count"});window.GOVUK.analyticsGa4.core.ecommerceHelperFunctions.clearEcommerceObject(),window.GOVUK.analyticsGa4.core.sendData(t)},e.prototype.handleClick=function(t){if(t.target.getAttribute("data-ga4-ecommerce-path")){
var e=window.GOVUK.analyticsGa4.core.ecommerceHelperFunctions.populateEcommerceSchema({element:this.module,resultsId:"ga4-ecommerce-result-count",event:t});window.GOVUK.analyticsGa4.core.ecommerceHelperFunctions.clearEcommerceObject(),window.GOVUK.analyticsGa4.core.sendData(e)}},t.Ga4SmartAnswerResultsTracker=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){function e(t){this.$module=t,this.pageHeight=document.querySelector("body").clientHeight,this.trackedNodes=[],this.config={allowHeadingsInside:["main"],percentages:[20,40,60,80,100],scrollTimeoutDelay:20,resizeTimeoutDelay:100,pageHeightTimeoutDelay:500,markerAttribute:"data-ga4-scroll-marker"}}e.prototype.init=function(){var t=window.GOVUK.getConsentCookie();t&&t.usage?this.startModule():(this.start=this.startModule.bind(this),window.addEventListener("cookie-consent",this.start))},e.prototype.startModule=function(){if(window.removeEventListener("cookie-consent",this.start),!window.GOVUK.analyticsGa4.vars.scrollTrackerStarted){this.trackType=this.$module.getAttribute("data-ga4-track-type"),window.GOVUK.analyticsGa4.vars.scrollTrackerStarted=!0,"headings"===this.trackType?this.track=new e.Heading(this.config):"markers"===this.trackType?(this.config.trackMarkers=!0,this.track=new e.Heading(this.config)):this.track=new e.Percentage(this.config),this.getWindowDetails();var t=window.location.hash;t&&document.getElementById(t.substring(1))||this.trackVisibleNodes(),this.trackedNodes.length&&(this.scrollEvent=this.onScroll.bind(this),window.addEventListener("scroll",this.scrollEvent),this.resizeEvent=this.onResize.bind(this),window.addEventListener("resize",this.resizeEvent),this.resetEvent=this.onReset.bind(this),window.addEventListener("dynamic-page-update",this.resetEvent),this.interval=window.setInterval(function(){var t=document.querySelector("body").clientHeight;t!==this.pageHeight&&(this.pageHeight=t,this.getWindowDetails(),this.trackVisibleNodes())}.bind(this),this.config.pageHeightTimeoutDelay))}},e.prototype.onScroll=function(){clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(function(){this.trackVisibleNodes()}.bind(this),this.config.scrollTimeoutDelay)},e.prototype.onResize=function(){clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){this.getWindowDetails(),this.trackVisibleNodes()}.bind(this),this.config.resizeTimeoutDelay)},e.prototype.getWindowDetails=function(){this.pageHeight=document.querySelector("body").clientHeight,this.windowHeight=window.innerHeight,this.trackedNodes=this.track.getTrackingNodes(this.trackedNodes)},e.prototype.trackVisibleNodes=function(){for(var t={event_name:"scroll",action:"scroll",type:this.config.type},e=0;e<this.trackedNodes.length;e++){var n=this.trackedNodes[e];this.isVisible(n.top,n.bottom)&&!n.alreadySeen&&(n.alreadySeen=!0,n.element&&n.element.setAttribute("data-ga4-scrolltracker-already-seen",!0),t.type=n.eventData.type,t.text=n.eventData.text,t.section=n.eventData.text,t.index_section=n.eventData.index_section,t.index_section_count=n.eventData.index_section_count,t.percent_scrolled=n.eventData.percent_scrolled,window.GOVUK.analyticsGa4.core.applySchemaAndSendData(t,"event_data"))}},e.prototype.isVisible=function(t,e){var n=window.scrollY||document.documentElement.scrollTop;return n<=t&&n+this.windowHeight>=e},e.prototype.onReset=function(){for(var t=0;t<this.trackedNodes.length;t++)this.trackedNodes[t].alreadySeen=!1},e.Heading=function(t){this.config=t},e.Heading.prototype.getTrackingNodes=function(){for(var t=[],e=this.findAllowedHeadings(),n=e.length,i=0;i<n;i++){var a=e[i],r=this.config.trackMarkers?"marker":"heading";if(this.visible(a)){var o=a.getBoundingClientRect();t.push({element:a,alreadySeen:a.getAttribute("data-ga4-scrolltracker-already-seen"),top:o.top+document.documentElement.scrollTop,bottom:o.bottom+document.documentElement.scrollTop,eventData:{type:r,text:a.getAttribute("data-ga4-text")||a.textContent.replace(/\s+/g," ").trim(),index_section:i+1,index_section_count:n}})}}return t},e.Heading.prototype.findAllowedHeadings=function(){var t=[],e=["h1","h2","h3","h4","h5","h6"];this.config.trackMarkers&&(e=["["+this.config.markerAttribute+"]"]);for(var n=0;n<this.config.allowHeadingsInside.length;n++)for(var i=document.querySelectorAll(this.config.allowHeadingsInside[n]),a=0;a<i.length;a++)for(var r=i[a].querySelectorAll(e),o=0;o<r.length;o++)t.push(r[o]);return t},e.Heading.prototype.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},e.Percentage=function(t){this.config=t},e.Percentage.prototype.getTrackingNodes=function(t){for(var e=document.body,n=document.documentElement,i=Math.max(e.scrollHeight,e.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight)-20,a=[],r=0;r<this.config.percentages.length;r++){var o=this.config.percentages[r],s=i/100*o,c=!1;t.length&&(c=t[r].alreadySeen),a.push({alreadySeen:c,top:s,bottom:s,eventData:{type:"percent",percent_scrolled:String(o)}})}return a},t.Ga4ScrollTracker=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){"use strict";class e{constructor(t){this.$module=t,this.$searchInput=this.$module.querySelector('input[type="search"]'),this.type=this.$module.dataset.ga4SearchType,this.url=this.$module.dataset.ga4SearchUrl,this.section=this.$module.dataset.ga4SearchSection,this.indexSection=this.$module.dataset.ga4SearchIndexSection,this.indexSectionCount=this.$module.dataset.ga4SearchIndexSectionCount,this.triggeredAction="unchanged"}init(){this.$searchInput?(this.$module.addEventListener("change",(t=>this.setTriggeredAction(t))),this.$module.addEventListener("input",(t=>this.setTriggeredAction(t))),window.GOVUK.getConsentCookie()&&window.GOVUK.getConsentCookie().usage?this.startModule():window.addEventListener("cookie-consent",(()=>this.startModule()))):console.warn("Ga4SearchTracker: Module added to element without child search input")}startModule(){this.$module.addEventListener("submit",(t=>this.trackSearch(t)))}setTriggeredAction(t){"search"===t.target.type?this.triggeredAction="search":"search"!==this.triggeredAction&&(this.triggeredAction="filter")}trackSearch(){this.$searchInput=this.$module.querySelector('input[type="search"]');const t={event_name:"search",action:this.triggeredAction,type:this.type,section:this.section,url:this.url,index_section:this.indexSection,index_section_count:this.indexSectionCount,text:this.searchTerm()};this.$searchInput.dataset.autocompleteTriggerInput&&("true"===this.$searchInput.dataset.autocompleteAccepted?(t.tool_name="autocomplete",window.sessionStorage&&window.sessionStorage.setItem("searchAutocompleteAccepted","true")):t.tool_name=null,t.length=Number(this.$searchInput.dataset.autocompleteSuggestionsCount),t.autocomplete_input=this.$searchInput.dataset.autocompleteTriggerInput,t.autocomplete_suggestions=this.$searchInput.dataset.autocompleteSuggestions),window.GOVUK.analyticsGa4.core.applySchemaAndSendData(t,"event_data")}searchTerm(){const{standardiseSearchTerm:t}=window.GOVUK.analyticsGa4.core.trackFunctions;return t(this.$searchInput.value)||""}}t.Ga4SearchTracker=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.analyticsGa4=window.GOVUK.analyticsGa4||{},window.GOVUK.analyticsGa4.analyticsModules=window.GOVUK.analyticsGa4.analyticsModules||{},function(){"use strict";var t={init:function(){this.handlers={}},configureVideo:function(t){for(var e=t.target,n=e.id,i=Math.ceil(e.getDuration()),a=[25,50,75],r=0;r<a.length;r++){var o=a[r],s=i/100*o;this.handlers["video-"+n+"-"+o+"-percent-begin"]=s,this.handlers["video-"+n+"-"+o+"-percent-end"]=s+2}this.handlers["video-"+n+"-duration"]=i,this.handlers["video-"+n+"-title"]=e.videoTitle,this.handlers["video-"+n+"-url"]=this.cleanVideoUrl(e.getVideoUrl())},trackVideo:function(t,e){var n=window.GOVUK.analyticsGa4.analyticsModules.VideoTracker,i=t.target,a=i.id;clearInterval(n.handlers["video-"+a]),"VideoUnstarted"===e?(n.handlers["video-"+a]=setInterval(n.checkProgress,1e3,i),n.sendData(i,"start",0)):"VideoPlaying"===e?n.handlers["video-"+a]=setInterval(n.checkProgress,1e3,i):"VideoEnded"===e&&(n.handlers["video-"+a+"-100"]||(n.sendData(i,"complete",100),n.handlers["video-"+a+"-100"]=!0))},checkProgress:function(t){for(var e=t.id,n=window.GOVUK.analyticsGa4.analyticsModules.VideoTracker,i=t.getCurrentTime(),a=[25,50,75],r=0;r<a.length;r++)if(i>=n.handlers["video-"+e+"-"+a[r]+"-percent-begin"]&&i<n.handlers["video-"+e+"-"+a[r]+"-percent-end"])return void(n.handlers["video-"+e+"-"+a[r]]||(n.sendData(t,"progress",a[r]),n.handlers["video-"+e+"-"+a[r]]=!0))},sendData:function(t,e,n){var i={};i.action=e,i.event_name="video_"+e,i.type="video",i.url=this.handlers["video-"+t.id+"-url"],i.text=this.handlers["video-"+t.id+"-title"],i.video_current_time=Math.round(t.getCurrentTime()),i.length=this.handlers["video-"+t.id+"-duration"],i.video_percent=n,window.GOVUK.analyticsGa4.core.applySchemaAndSendData(i,"event_data")},cleanVideoUrl:function(t){return t=(t=t.replace(/[?]{1}t=[0-9]+[&]{1}/,"?")).replace(/[&]{1}t=[0-9]+/,"")}};window.GOVUK.analyticsGa4.analyticsModules.VideoTracker=t}(),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){"use strict";function e(t){this.module=t,this.trackingTrigger="data-ga4-focus-loss"}e.prototype.init=function(){var t=window.GOVUK.getConsentCookie();t&&t.usage?this.startModule():(this.start=this.startModule.bind(this),window.addEventListener("cookie-consent",this.start))},e.prototype.startModule=function(){window.dataLayer&&(window.removeEventListener("cookie-consent",this.start),this.module.addEventListener("blur",this.trackFocusLoss.bind(this)),this.module.piiRemover=new window.GOVUK.analyticsGa4.PIIRemover)},e.prototype.trackFocusLoss=function(t){var e=t.target.getAttribute(this.trackingTrigger);if(e){try{e=JSON.parse(e)}catch(t){return void console.warn("GA4 configuration error: "+t.message,window.location)}var n=t.target.tagName,i=t.target.getAttribute("type");e.text?e.text=this.module.piiRemover.stripPIIWithOverride(e.text,!0,!0):"INPUT"!==n||"search"!==i&&"text"!==i||(e.text=window.GOVUK.analyticsGa4.core.trackFunctions.standardiseSearchTerm(this.module.value)),window.GOVUK.analyticsGa4.core.applySchemaAndSendData(e,"event_data")}},t.Ga4FocusLossTracker=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.analyticsGa4=window.GOVUK.analyticsGa4||{};var initFunction=function(){window.removeEventListener("cookie-consent",window.GOVUK.analyticsGa4.init);var t=window.GOVUK.getConsentCookie();if(t&&t.usage){window.GOVUK.analyticsGa4.vars.internalDomains=[],window.GOVUK.analyticsGa4.vars.internalDomains.push(window.GOVUK.analyticsGa4.core.trackFunctions.getHostname()),window.GOVUK.analyticsGa4.core.trackFunctions.appendDomainsWithoutWWW(window.GOVUK.analyticsGa4.vars.internalDomains),window.GOVUK.analyticsGa4.core.load();var e=window.GOVUK.analyticsGa4.analyticsModules;for(var n in e){var i=e[n];if("function"==typeof i.init)try{i.init()}catch(t){console.warn("Error starting analytics module "+n+": "+t.message,window.location)}}}else window.addEventListener("cookie-consent",window.GOVUK.analyticsGa4.init)};window.GOVUK.analyticsGa4.init=initFunction,window.GOVUK=window.GOVUK||{},window.GOVUK.vars=window.GOVUK.vars||{},window.GOVUK.vars.domains=[{name:"development",domains:["localhost","127.0.0.1","0.0.0.0","dev.gov.uk"],initialiseGA4:!0,id:"GTM-MG7HG5W",auth:"bRiZ-jiEHtw6hHpGd6dF9w",preview:"env-3",consentApiUrl:"staging"},{name:"production",domains:["www.gov.uk","www-origin.publishing.service.gov.uk","assets.publishing.service.gov.uk"],initialiseGA4:!0,id:"GTM-MG7HG5W",consentApiUrl:"production"},{name:"staging",domains:["www.staging.publishing.service.gov.uk","www-origin.staging.publishing.service.gov.uk","assets.staging.publishing.service.gov.uk"],initialiseGA4:!0,id:"GTM-MG7HG5W",auth:"oJWs562CxSIjZKn_GlB5Bw",preview:"env-5",consentApiUrl:"staging"},{name:"integration",domains:["www.integration.publishing.service.gov.uk","www-origin.integration.publishing.service.gov.uk","assets.integration.publishing.service.gov.uk"],initialiseGA4:!0,id:"GTM-MG7HG5W",auth:"C7iYdcsOlYgGmiUJjZKrHQ",preview:"env-4",consentApiUrl:"staging"},{name:"devdocs",domains:["docs.publishing.service.gov.uk"],initialiseGA4:!0,id:"GTM-TNKCK97",consentApiUrl:"production"}],window.GOVUK.loadAnalytics={loadExtraDomains:function(){Array.isArray(window.GOVUK.vars.extraDomains)&&(window.GOVUK.vars.domains=window.GOVUK.vars.domains.concat(window.GOVUK.vars.extraDomains))},loadGa4:function(t){t=t||window.location.hostname;var e=this.getEnvironment(t);if(e&&void 0!==window.GOVUK.analyticsGa4.init&&e.initialiseGA4){window.GOVUK.analyticsGa4=window.GOVUK.analyticsGa4||{},window.GOVUK.analyticsGa4.vars=window.GOVUK.analyticsGa4.vars||{},window.GOVUK.analyticsGa4.vars.id=e.id,window.GOVUK.analyticsGa4.vars.auth=e.auth,window.GOVUK.analyticsGa4.vars.preview=e.preview,window.GOVUK.analyticsGa4.vars.environment=e.name,window.GOVUK.analyticsGa4.vars.gem_version="not found";var n=document.querySelector('meta[name="govuk:components_gem_version"]');n&&(window.GOVUK.analyticsGa4.vars.gem_version=n.getAttribute("content")),window.GOVUK.analyticsGa4.init()}},arrayContains:function(t,e){return-1!==e.indexOf(t)},getEnvironment:function(t){if(t.match(/[a-zA-Z0-9.-]+dev\.gov\.uk/))return window.GOVUK.vars.domains[0];for(var e=0;e<window.GOVUK.vars.domains.length;e++)if(this.arrayContains(t,window.GOVUK.vars.domains[e].domains))return window.GOVUK.vars.domains[e]}};